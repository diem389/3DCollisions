
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Octree-Node Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="raycast.html" />
    
    
    <link rel="prev" href="octree.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Chapter0/">
            
                <a href="../Chapter0/">
            
                    
                    New Repo
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../Chapter0/application.html">
            
                <a href="../Chapter0/application.html">
            
                    
                    Applicaiton.cs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../Chapter0/program.html">
            
                <a href="../Chapter0/program.html">
            
                    
                    Program.cs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../Chapter0/samples.html">
            
                <a href="../Chapter0/samples.html">
            
                    
                    Samples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../Chapter0/console.html">
            
                <a href="../Chapter0/console.html">
            
                    
                    Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../Chapter0/window.html">
            
                <a href="../Chapter0/window.html">
            
                    
                    Windowed
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Chapter1/">
            
                <a href="../Chapter1/">
            
                    
                    Shapes And Points
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../Chapter1/point.html">
            
                <a href="../Chapter1/point.html">
            
                    
                    Point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../Chapter1/sphere.html">
            
                <a href="../Chapter1/sphere.html">
            
                    
                    Sphere
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../Chapter1/point_in_sphere.html">
            
                <a href="../Chapter1/point_in_sphere.html">
            
                    
                    Point in Sphere
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../Chapter1/closest_point_sphere.html">
            
                <a href="../Chapter1/closest_point_sphere.html">
            
                    
                    Closest point on Sphere
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../Chapter1/aabb.html">
            
                <a href="../Chapter1/aabb.html">
            
                    
                    AABB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../Chapter1/point_in_aabb.html">
            
                <a href="../Chapter1/point_in_aabb.html">
            
                    
                    Point in AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../Chapter1/closest_point_aabb.html">
            
                <a href="../Chapter1/closest_point_aabb.html">
            
                    
                    Closest point on AABB
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../Chapter1/plane.html">
            
                <a href="../Chapter1/plane.html">
            
                    
                    Plane
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../Chapter1/point_on_plane.html">
            
                <a href="../Chapter1/point_on_plane.html">
            
                    
                    Point on Plane
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../Chapter1/closest_point_on_plane.html">
            
                <a href="../Chapter1/closest_point_on_plane.html">
            
                    
                    Closest point on Plane
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../Chapter1/three_plane_intersection.html">
            
                <a href="../Chapter1/three_plane_intersection.html">
            
                    
                    3 Plane Intersection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../Chapter1/line.html">
            
                <a href="../Chapter1/line.html">
            
                    
                    Line
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../Chapter1/point_on_line.html">
            
                <a href="../Chapter1/point_on_line.html">
            
                    
                    Point on line
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../Chapter1/closest_point_on_line.html">
            
                <a href="../Chapter1/closest_point_on_line.html">
            
                    
                    Closes point on Line
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../Chapter1/ray.html">
            
                <a href="../Chapter1/ray.html">
            
                    
                    Ray
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../Chapter1/point_on_ray.html">
            
                <a href="../Chapter1/point_on_ray.html">
            
                    
                    Point on ray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../Chapter1/closest_point_on_ray.html">
            
                <a href="../Chapter1/closest_point_on_ray.html">
            
                    
                    Closest point on Ray
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Intermission0/">
            
                <a href="../Intermission0/">
            
                    
                    Intermission
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../Chapter2/">
            
                <a href="../Chapter2/">
            
                    
                    Static Intersections
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../Chapter2/static_sphere_sphere.html">
            
                <a href="../Chapter2/static_sphere_sphere.html">
            
                    
                    Sphere-Sphere
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../Chapter2/static_sphere_aabb.html">
            
                <a href="../Chapter2/static_sphere_aabb.html">
            
                    
                    Sphere-AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../Chapter2/static_sphere_plane.html">
            
                <a href="../Chapter2/static_sphere_plane.html">
            
                    
                    Sphere-Plane
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../Chapter2/static_aabb_aabb.html">
            
                <a href="../Chapter2/static_aabb_aabb.html">
            
                    
                    AABB-AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../Chapter2/static_aabb_plane.html">
            
                <a href="../Chapter2/static_aabb_plane.html">
            
                    
                    AABB-Plane
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../Chapter2/static_plane_plane.html">
            
                <a href="../Chapter2/static_plane_plane.html">
            
                    
                    Plane-Plane
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Chapter3/">
            
                <a href="../Chapter3/">
            
                    
                    Lines and Rays
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../Chapter3/raycasting.html">
            
                <a href="../Chapter3/raycasting.html">
            
                    
                    Ray casting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../Chapter3/raycast_sphere.html">
            
                <a href="../Chapter3/raycast_sphere.html">
            
                    
                    Against Sphere
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../Chapter3/raycast_aabb.html">
            
                <a href="../Chapter3/raycast_aabb.html">
            
                    
                    Against AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../Chapter3/raycast_plane.html">
            
                <a href="../Chapter3/raycast_plane.html">
            
                    
                    Against Plane
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Chapter3/linetesting.html">
            
                <a href="../Chapter3/linetesting.html">
            
                    
                    Line testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../Chapter3/line_sphere.html">
            
                <a href="../Chapter3/line_sphere.html">
            
                    
                    Against Sphere
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../Chapter3/line_aabb.html">
            
                <a href="../Chapter3/line_aabb.html">
            
                    
                    Against AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="../Chapter3/line_plane.html">
            
                <a href="../Chapter3/line_plane.html">
            
                    
                    Against Plane
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Chapter2/dynamic.html">
            
                <a href="../Chapter2/dynamic.html">
            
                    
                    Dynamic Intersections
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Chapter2/dynamic_aabb_aabb.html">
            
                <a href="../Chapter2/dynamic_aabb_aabb.html">
            
                    
                    Time Slicing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Chapter2/dynamic_sphere_sphere.html">
            
                <a href="../Chapter2/dynamic_sphere_sphere.html">
            
                    
                    Linear Impact Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Chapter2/dynamic_sphere_aabb.html">
            
                <a href="../Chapter2/dynamic_sphere_aabb.html">
            
                    
                    Binary Impact Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../Chapter2/dynamic_sphere_plane.html">
            
                <a href="../Chapter2/dynamic_sphere_plane.html">
            
                    
                    Multiple Moving Objects
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../Chapter4/">
            
                <a href="../Chapter4/">
            
                    
                    3D Models
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../Chapter4/triangle.html">
            
                <a href="../Chapter4/triangle.html">
            
                    
                    Triangle
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="../Chapter4/point_in_triangle.html">
            
                <a href="../Chapter4/point_in_triangle.html">
            
                    
                    Point in Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="../Chapter4/closest_point_to_triangle.html">
            
                <a href="../Chapter4/closest_point_to_triangle.html">
            
                    
                    Closest point to triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" data-path="../Chapter4/sphere_to_triangle.html">
            
                <a href="../Chapter4/sphere_to_triangle.html">
            
                    
                    Sphere-Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" data-path="../Chapter4/aabb-triangle.html">
            
                <a href="../Chapter4/aabb-triangle.html">
            
                    
                    AABB-Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.5" data-path="../Chapter4/plane-triangle.html">
            
                <a href="../Chapter4/plane-triangle.html">
            
                    
                    Plane-Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.6" data-path="../Chapter4/generic_sat.html">
            
                <a href="../Chapter4/generic_sat.html">
            
                    
                    Generic SAT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.7" data-path="../Chapter4/triangle-triangle.html">
            
                <a href="../Chapter4/triangle-triangle.html">
            
                    
                    Triangle-Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.8" data-path="../Chapter4/robust_sat.html">
            
                <a href="../Chapter4/robust_sat.html">
            
                    
                    Robust SAT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.9" data-path="../Chapter4/raycast_triangle.html">
            
                <a href="../Chapter4/raycast_triangle.html">
            
                    
                    Raycast Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.10" data-path="../Chapter4/line_test_triangle.html">
            
                <a href="../Chapter4/line_test_triangle.html">
            
                    
                    Line test Triangle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../Chapter4/containers.html">
            
                <a href="../Chapter4/containers.html">
            
                    
                    Broad-Phase Collision
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="../Chapter4/addingtriangles_to_model_md.html">
            
                <a href="../Chapter4/addingtriangles_to_model_md.html">
            
                    
                    Adding Triangles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="../Chapter4/aabb.html">
            
                <a href="../Chapter4/aabb.html">
            
                    
                    AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="../Chapter4/sphere.html">
            
                <a href="../Chapter4/sphere.html">
            
                    
                    Sphere
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../Chapter4/model_test.html">
            
                <a href="../Chapter4/model_test.html">
            
                    
                    Collision Tests
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="../Chapter4/model_test_sphere.html">
            
                <a href="../Chapter4/model_test_sphere.html">
            
                    
                    Sphere
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.2" data-path="../Chapter4/m_test_aabb.html">
            
                <a href="../Chapter4/m_test_aabb.html">
            
                    
                    AABB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.3" data-path="../Chapter4/model_test_plane.html">
            
                <a href="../Chapter4/model_test_plane.html">
            
                    
                    Plane
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.4" data-path="../Chapter4/model_test_triangle.html">
            
                <a href="../Chapter4/model_test_triangle.html">
            
                    
                    Triangle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.5" data-path="../Chapter4/model_test_ray.html">
            
                <a href="../Chapter4/model_test_ray.html">
            
                    
                    Ray
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../Chapter4/raycast_model.html">
            
                <a href="../Chapter4/raycast_model.html">
            
                    
                    Raycast Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.4.1" data-path="../Chapter4/bvh.html">
            
                <a href="../Chapter4/bvh.html">
            
                    
                    BVH - Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.2" data-path="../Chapter4/bvh_split.html">
            
                <a href="../Chapter4/bvh_split.html">
            
                    
                    BVH - Split
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.3" data-path="../Chapter4/bch_shake.html">
            
                <a href="../Chapter4/bch_shake.html">
            
                    
                    BVH - Shake
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.4" data-path="../Chapter4/bvh_raycast.html">
            
                <a href="../Chapter4/bvh_raycast.html">
            
                    
                    BVH - Raycast
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    Scene Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="hierarchy.html">
            
                <a href="hierarchy.html">
            
                    
                    Hierarchy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="make_a_scene.html">
            
                <a href="make_a_scene.html">
            
                    
                    Making a scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="octree.html">
            
                <a href="octree.html">
            
                    
                    Octree
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.9.3.1" data-path="dynamic_objects.html">
            
                <a href="dynamic_objects.html">
            
                    
                    Octree-Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.2" data-path="raycast.html">
            
                <a href="raycast.html">
            
                    
                    Raycast
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="picking.html">
            
                <a href="picking.html">
            
                    
                    Picking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="other_structures.html">
            
                <a href="other_structures.html">
            
                    
                    Other structures
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Chapter6/">
            
                <a href="../Chapter6/">
            
                    
                    Camera
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../Chapter6/debug_info.html">
            
                <a href="../Chapter6/debug_info.html">
            
                    
                    Debug Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../Chapter6/frustum.html">
            
                <a href="../Chapter6/frustum.html">
            
                    
                    Frustum
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="../Chapter6/point_in_frustum.html">
            
                <a href="../Chapter6/point_in_frustum.html">
            
                    
                    Point in Frustum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="../Chapter6/sphere_in_frustum.html">
            
                <a href="../Chapter6/sphere_in_frustum.html">
            
                    
                    Sphere in Frustum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3" data-path="../Chapter6/aabb_in_frustum.html">
            
                <a href="../Chapter6/aabb_in_frustum.html">
            
                    
                    AABB in Frustum
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../Chapter6/culling.html">
            
                <a href="../Chapter6/culling.html">
            
                    
                    Culling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Chapter7/">
            
                <a href="../Chapter7/">
            
                    
                    Further Research
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../Chapter7/obb.html">
            
                <a href="../Chapter7/obb.html">
            
                    
                    OBB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../Chapter7/capsule.html">
            
                <a href="../Chapter7/capsule.html">
            
                    
                    Capsule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../Chapter7/elipsoid.html">
            
                <a href="../Chapter7/elipsoid.html">
            
                    
                    Elipsoid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../Chapter7/cylinder.html">
            
                <a href="../Chapter7/cylinder.html">
            
                    
                    Cylinder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../Chapter7/engines.html">
            
                <a href="../Chapter7/engines.html">
            
                    
                    Physics Engines
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Octree-Node</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="octree-node">Octree Node</h1>
<p>A tree is made up of many nodes, the octree is no different. There is no specific <code>Octree</code> class, just an <code>OctreeNode</code> within our scene that servers as the root of the tree.</p>
<h3 id="create-node">Create Node</h3>
<p>Let&apos;s start off with the definition of a node. A node contains an Axis Aligned Bounding Box, this is the area of the node. A reference to it&apos;s parent (We are in a tree after all), and a list of it&apos;s children. The node also contains a list of objects it can potentially hold.</p>
<p>If a node has children, it will not have contents. If a node has contents, it will not have children. This makes determining what is and isn&apos;t a leaf node fairly simple. Leaf nodes have no children, therefore <code>Children</code> will be null.</p>
<p>The constructor will, by default make each node a leaf node. It isn&apos;t until later, when we split the node that it can become a non-leaf.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Math_Implementation;
<span class="hljs-keyword">using</span> CollisionDetectionSelector.Primitives;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">CollisionDetectionSelector</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">OctreeNode</span> {
        <span class="hljs-keyword">public</span> AABB Bounds = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">public</span> OctreeNode Parent = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">public</span> List&lt;OctreeNode&gt; Children = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">public</span> List&lt;OBJ&gt; Contents = <span class="hljs-keyword">null</span>;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OctreeNode</span>(<span class="hljs-params">Point position, <span class="hljs-keyword">float</span> halfSize, OctreeNode parent</span>) </span>{
            Bounds = <span class="hljs-keyword">new</span> AABB(
                <span class="hljs-keyword">new</span> Point(position.X - halfSize, position.Y - halfSize, position.Z - halfSize),
                <span class="hljs-keyword">new</span> Point(position.X + halfSize, position.Y + halfSize, position.Z + halfSize)
            );
            Parent = parent;
            Contents = <span class="hljs-keyword">new</span> List&lt;OBJ&gt;();
            <span class="hljs-comment">// Keep children null, this is a leaf node until the &quot;Split&quot; function is called</span>
        }
    }
}
</code></pre>
<h3 id="split-node">Split Node</h3>
<p>The split node function will invalidate the current octree. Therefore it MUST be called BEFORE any objects are inserted into the tree. Much like the BVH version, our split method is going to be recursive.</p>
<p>Unlike the BVH however, the user will have control over how many times a node gets split! The function takes a single integer, the number of times to split the node. This integer is decremented by 1 for each recursive call.</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Split</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> level</span>) </span>{
    <span class="hljs-comment">// Bounds.Extens.x is the same as y and z, all nodes are square</span>
    <span class="hljs-comment">// We want each child node to be half as big as this node</span>
    <span class="hljs-keyword">float</span> splitSize = Bounds.Extents.X / <span class="hljs-number">2.0</span>f;

    <span class="hljs-comment">// Also, the constructor of the Octree node takes in the CENTER</span>
    <span class="hljs-comment">// position of the new node, therefore we want to create new</span>
    <span class="hljs-comment">// nodes from the center of this node + or - 1/4 the size of</span>
    <span class="hljs-comment">// this node. This is similar to BVH, but different in size.</span>
    Vector3[] childPattern = <span class="hljs-keyword">new</span> Vector3[] {
        <span class="hljs-keyword">new</span> Vector3(+<span class="hljs-number">1</span>f, <span class="hljs-number">-1</span>f, <span class="hljs-number">-1</span>f), <span class="hljs-comment">// Right, Top, Front</span>
        <span class="hljs-keyword">new</span> Vector3(+<span class="hljs-number">1</span>f, <span class="hljs-number">-1</span>f, +<span class="hljs-number">1</span>f), <span class="hljs-comment">// Right, Top, Back</span>
        <span class="hljs-keyword">new</span> Vector3(+<span class="hljs-number">1</span>f, +<span class="hljs-number">1</span>f, <span class="hljs-number">-1</span>f), <span class="hljs-comment">// Right, Bottom, Front</span>
        <span class="hljs-keyword">new</span> Vector3(+<span class="hljs-number">1</span>f, +<span class="hljs-number">1</span>f, +<span class="hljs-number">1</span>f), <span class="hljs-comment">// Right, Bottom, Back</span>
        <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-1</span>f, <span class="hljs-number">-1</span>f, <span class="hljs-number">-1</span>f), <span class="hljs-comment">// Left, Top, Front</span>
        <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-1</span>f, <span class="hljs-number">-1</span>f, +<span class="hljs-number">1</span>f), <span class="hljs-comment">// Left, Top, Back</span>
        <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-1</span>f, +<span class="hljs-number">1</span>f, <span class="hljs-number">-1</span>f), <span class="hljs-comment">// Left, Bottom, Front</span>
        <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-1</span>f, +<span class="hljs-number">1</span>f, +<span class="hljs-number">1</span>f), <span class="hljs-comment">// Left, Bottom, Back</span>
    };

    <span class="hljs-comment">// Make the actual child nodes</span>
    Children = <span class="hljs-keyword">new</span> List&lt;OctreeNode&gt;();
    Contents = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// We are no longer a leaf node!</span>
    <span class="hljs-keyword">foreach</span> (Vector3 offset <span class="hljs-keyword">in</span> childPattern) {
        <span class="hljs-comment">// Remember to account for the center of the current node</span>
        Point position = <span class="hljs-keyword">new</span> Point(Bounds.Center.ToVector() + offset * splitSize);
        OctreeNode child = <span class="hljs-keyword">new</span> OctreeNode(position, splitSize, <span class="hljs-keyword">this</span>);
        Children.Add(child);
    }

    <span class="hljs-comment">// If we have not reached the max split depth yet, </span>
    <span class="hljs-comment">// go ahead and recursivley call this method for all children</span>
    <span class="hljs-keyword">if</span> (level &gt; <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">foreach</span>(OctreeNode child <span class="hljs-keyword">in</span> Children) {
            child.Split(level - <span class="hljs-number">1</span>);
        }
    }
}
</code></pre>
<h3 id="insert-object">Insert Object</h3>
<p>Inserting an object is fairly straight forward. The object will only insert if the Bounds of the current node intersect it. If that&apos;s not the case, none of the children nodes will intersect the object either! </p>
<p>^ The above statement only holds true if the ABB-OBJ test is implemented as a SAT test. Ours is not, this is why we are going to be testing the bounding sphere, instead of the OBJ its-self. That way, our Octree insertion is a series of Sphere-AABB tests.</p>
<p>The one catch here is that <code>OBJ.BoundingSphere</code> is local space, not world space! So, we need to fix that. This is a simple translation we&apos;ve already made when handling the BVH code before.</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Insert</span>(<span class="hljs-params">OBJ obj</span>) </span>{
    <span class="hljs-comment">// Remember, the bounding sphere is model space, we need it to</span>
    <span class="hljs-comment">// be world space! Multiply the position and scale the radius</span>
    Sphere worldSpaceSphere = <span class="hljs-keyword">new</span> Sphere();
    worldSpaceSphere.Position = <span class="hljs-keyword">new</span> Point(
        Matrix4.MultiplyPoint(obj.WorldMatrix, obj.BoundingSphere.Position.ToVector())
    ); <span class="hljs-comment">// End new point</span>
    <span class="hljs-keyword">float</span> scale = Math.Max(obj.WorldMatrix[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], Math.Max(obj.WorldMatrix[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], obj.WorldMatrix[<span class="hljs-number">2</span>, <span class="hljs-number">2</span>]));
    worldSpaceSphere.Radius = obj.BoundingSphere.Radius * scale;

    <span class="hljs-keyword">if</span> (Collisions.Intersects(worldSpaceSphere, Bounds)) {
        <span class="hljs-comment">// We knoe the obj intersects this node, if it&apos;s a leaf</span>
        <span class="hljs-comment">// add it to the object list, if not, recurse!</span>
        <span class="hljs-keyword">if</span> (Children != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">foreach</span>(OctreeNode child <span class="hljs-keyword">in</span> Children) {
                child.Insert(obj);
            }
        }
        <span class="hljs-keyword">else</span> {
            Contents.Add(obj);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
}
</code></pre>
<h3 id="remove-object">Remove Object</h3>
<p>Removing an object is super simple. If this node is a leaf node, search trough the objects it contains, and remove the object if it is in the list. If not, recursivley call the function for every node</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Remove</span>(<span class="hljs-params">OBJ obj</span>) </span>{
    <span class="hljs-keyword">if</span> (Children != <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">foreach</span>(OctreeNode child <span class="hljs-keyword">in</span> Children) {
            child.Remove(obj);
        }
    }
    <span class="hljs-keyword">else</span> {
        Contents.Remove(obj);
    }
}
</code></pre>
<h3 id="update-object">Update Object</h3>
<p>Updating an octree is a very hot topic of research. Everyone wants to have the fastest update possible. When an object moves, rotates or scales, we have to update what octree nodes it belongs to.</p>
<p>While there are a LOT of algorithms for this out there, we&apos;re going to implement a very basic one! Any time an object rotates or moves we simply remove it from the tree and re-insert it. This is the brute force method, it&apos;s not efficient, but it is reliable</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Update</span>(<span class="hljs-params">OBJ obj</span>) </span>{
    Remove(obj);
    <span class="hljs-keyword">return</span> Insert(obj);
}
</code></pre>
<p>This update method actually has a bit of a flaw. Right now, when an object is updated it is removed from the octree and then added back in. Really, this should be recursive! All of the object&apos;s children, and it&apos;s children need to be removed and inserted too! We can easily turn this function into a recursive one:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Update</span>(<span class="hljs-params">OBJ obj</span>) </span>{
    <span class="hljs-keyword">if</span> (obj.Children != <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">foreach</span> (OBJ child <span class="hljs-keyword">in</span> obj.Children) {
            Update(child);
        }
    }
    Remove(obj);
    <span class="hljs-keyword">return</span> Insert(obj);
}
</code></pre>
<h3 id="debug-render">Debug Render</h3>
<p>It&apos;s useful to be able to visualize what we just implemented! For that reason, i say we add a <code>DebugRender</code> function. This function is simple, it just recursivley draws the bounding rectangle of each node.</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DebugRender</span>(<span class="hljs-params"></span>) </span>{
    Bounds.Render();
    <span class="hljs-keyword">if</span> (Children != <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">foreach</span> (OctreeNode node <span class="hljs-keyword">in</span> Children) {
            node.DebugRender();
        }
    }
}
</code></pre>
<p>After having finished this article, i decided it would be visually great to have the bounding spheres of objects also render so i could approximate which OctreeNode&apos;s the object is stored in. You don&apos;t have to do this, but it&apos;s a good exercise, if you want to see how i did it, <a href="https://gist.github.com/gszauer/426702bbf60efa497bc686a032d90e10" target="_blank">the code is here</a></p>
<h2 id="scene-integration">Scene Integration</h2>
<p>Now that we have an octree node, all we have to do is add the root node to the scene, and we have an octree! I&apos;m going to be modifying the existing scene class for this. </p>
<p>First, add the octree root to the scene. Next, add an initalize function. This function will take in the overall size of the octree (The half-size of it&apos;s root node). This function is responsible for creating the tree and splitting it. A split size of 3 will do for now.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">public</span> OctreeNode Octree = <span class="hljs-keyword">null</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> octreeSize</span>) </span>{
    Octree = <span class="hljs-keyword">new</span> OctreeNode(<span class="hljs-keyword">new</span> Point(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), octreeSize, <span class="hljs-keyword">null</span>);
    Octree.Split(<span class="hljs-number">3</span>);
}
</code></pre>
<p>In larger AAA games, it&apos;s not uncommon to see the default octree be of <strong>size 5000</strong>, with a <strong>split</strong> level of <strong>8</strong>.</p>
<p>Next up, let&apos;s modify the render function of the scene to render the debug version of the octree</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
    RootObject.Render();

    GL.Disable(EnableCap.Lighting);
    GL.PolygonMode(MaterialFace.FrontAndBack, PolygonMode.Line);
    Octree.DebugRender();
    GL.PolygonMode(MaterialFace.FrontAndBack, PolygonMode.Fill);
    GL.Enable(EnableCap.Lighting);
}
</code></pre>
<p>And that&apos;s it for us! In an actual game engine you would not expose the <code>RootObject</code> or <code>Octree</code>. Instead you&apos;d have a function like <code>AddObject</code> that would create a new object and add it to both the root and octree. For our example however, this is not needed, whoever owns the scene will also update the octree.</p>
<h2 id="unit-testing">Unit Testing</h2>
<p>The code for this unit test is <strong>almost</strong> identical to the last one. The only real difference is in the <code>Initialize</code> and <code>Update</code> functions. Whenever we create a new node in the <code>Initialize</code> function, it is added to the octree. And, when we rotate the cube node insize the <code>Update</code> function we update the octree.</p>
<p>The rendering looks different, the octree we created will be visible. This has nothing to do with the unit test however, as we simply added the code to render the octree to the scenes render function, which is called from the unit test.</p>
<p>The current project should look like this:</p>
<p><img src="raycast_octree_2.png" alt="RO2"></p>
<p>That blue line sticking out the back is NOT a rendering artifact. It&apos;s a ray that has hit an object.</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> OpenTK.Graphics.OpenGL;
<span class="hljs-keyword">using</span> Math_Implementation;
<span class="hljs-keyword">using</span> CollisionDetectionSelector.Primitives;
<span class="hljs-keyword">using</span> CollisionDetectionSelector;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">CollisionDetectionSelector.Samples</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title">SceneSample02</span> : <span class="hljs-title">Application</span> {
        Scene scene = <span class="hljs-keyword">new</span> Scene();
        OBJ cubeNode = <span class="hljs-keyword">null</span>;

        OBJLoader suzane = <span class="hljs-keyword">null</span>;
        OBJLoader cube = <span class="hljs-keyword">null</span>;
        OBJLoader torus = <span class="hljs-keyword">null</span>;

        Ray[] rays = <span class="hljs-keyword">new</span> Ray[] {
            <span class="hljs-keyword">new</span> Ray(<span class="hljs-keyword">new</span> Point(<span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f), <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0.0</span>f, <span class="hljs-number">-1.0</span>f, <span class="hljs-number">0.0</span>f)),
            <span class="hljs-keyword">new</span> Ray(<span class="hljs-keyword">new</span> Point(<span class="hljs-number">-1</span>f, <span class="hljs-number">-3</span>f, <span class="hljs-number">-5</span>f), <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f))
        };

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Intialize</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height</span>) </span>{
            GL.Enable(EnableCap.DepthTest);
            GL.Enable(EnableCap.CullFace);
            GL.Enable(EnableCap.Lighting);
            GL.Enable(EnableCap.Light0);
            GL.PointSize(<span class="hljs-number">5</span>f);

            GL.Light(LightName.Light0, LightParameter.Position, <span class="hljs-keyword">new</span> <span class="hljs-keyword">float</span>[] { <span class="hljs-number">0.0</span>f, <span class="hljs-number">0.5</span>f, <span class="hljs-number">0.5</span>f, <span class="hljs-number">0.0</span>f });
            GL.Light(LightName.Light0, LightParameter.Ambient, <span class="hljs-keyword">new</span> <span class="hljs-keyword">float</span>[] { <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f });
            GL.Light(LightName.Light0, LightParameter.Diffuse, <span class="hljs-keyword">new</span> <span class="hljs-keyword">float</span>[] { <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f });
            GL.Light(LightName.Light0, LightParameter.Specular, <span class="hljs-keyword">new</span> <span class="hljs-keyword">float</span>[] { <span class="hljs-number">1</span>f, <span class="hljs-number">1</span>f, <span class="hljs-number">1</span>f, <span class="hljs-number">1</span>f });

            scene.Initialize(<span class="hljs-number">7</span>f);

            suzane = <span class="hljs-keyword">new</span> OBJLoader(<span class="hljs-string">&quot;Assets/suzanne.obj&quot;</span>);
            cube = <span class="hljs-keyword">new</span> OBJLoader(<span class="hljs-string">&quot;Assets/cube.obj&quot;</span>);
            torus = <span class="hljs-keyword">new</span> OBJLoader(<span class="hljs-string">&quot;Assets/torus.obj&quot;</span>);

            OBJ node = <span class="hljs-keyword">new</span> OBJ(suzane);
            node.Parent = scene.RootObject;
            node.Parent.Children.Add(node);
            node.Position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">2.0</span>f, <span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f);
            <span class="hljs-comment">/* NEW */</span> scene.Octree.Insert(node);

            node = <span class="hljs-keyword">new</span> OBJ(suzane);
            node.Parent = scene.RootObject.Children[<span class="hljs-number">0</span>]; <span class="hljs-comment">// suzane reference</span>
            node.Parent.Children.Add(node);
            node.Position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-2.0</span>f, <span class="hljs-number">-1.0</span>f, <span class="hljs-number">0.0</span>f);
            node.Scale = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0.5</span>f, <span class="hljs-number">0.5</span>f, <span class="hljs-number">0.5</span>f);
            node.Rotation = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">90.0</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">0</span>f);
            <span class="hljs-comment">/* NEW */</span> scene.Octree.Insert(node);

            node = <span class="hljs-keyword">new</span> OBJ(suzane);
            node.Parent = scene.RootObject.Children[<span class="hljs-number">0</span>]; <span class="hljs-comment">// suzane reference</span>
            node.Parent.Children.Add(node);
            node.Position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f, <span class="hljs-number">-2.0</span>f);
            node.Rotation = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>f, <span class="hljs-number">180</span>f, <span class="hljs-number">0</span>f);
            <span class="hljs-comment">/* NEW */</span> scene.Octree.Insert(node);

            node = <span class="hljs-keyword">new</span> OBJ(cube);
            node.Parent = scene.RootObject;
            node.Parent.Children.Add(node);
            node.Position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">-2.0</span>f, <span class="hljs-number">3.0</span>f, <span class="hljs-number">1.0</span>f);
            node.Rotation = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">45.0</span>f, <span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f);
            cubeNode = node;
            <span class="hljs-comment">/* NEW */</span> scene.Octree.Insert(node);

            node = <span class="hljs-keyword">new</span> OBJ(torus);
            node.Parent = cubeNode;
            node.Parent.Children.Add(node);
            node.Position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0.0</span>f, <span class="hljs-number">0.0</span>f, <span class="hljs-number">-1.0</span>f);
            <span class="hljs-comment">/* NEW */</span> scene.Octree.Insert(node);

            <span class="hljs-keyword">bool</span>[]  b_res = <span class="hljs-keyword">new</span> <span class="hljs-keyword">bool</span>[] { <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span> };
            <span class="hljs-keyword">float</span>[] t_res = <span class="hljs-keyword">new</span> <span class="hljs-keyword">float</span>[] { <span class="hljs-number">2.730469</span>f, <span class="hljs-number">0</span>f } ;

            <span class="hljs-keyword">float</span> t = <span class="hljs-number">0.0</span>f;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rays.Length; ++i) {
                <span class="hljs-keyword">bool</span> result = scene.Raycast(rays[i], <span class="hljs-keyword">out</span> t) != <span class="hljs-keyword">null</span>;
                <span class="hljs-keyword">if</span> (result != b_res[i]) {
                    System.Console.WriteLine(<span class="hljs-string">&quot;ray &quot;</span> + i + <span class="hljs-string">&quot;, expected: &quot;</span> + b_res[i].ToString() + <span class="hljs-string">&quot;, got: &quot;</span> + result.ToString());
                }
                <span class="hljs-keyword">if</span> (!CMP(t, t_res[i])) {
                    System.Console.WriteLine(<span class="hljs-string">&quot;ray &quot;</span> + i + <span class="hljs-string">&quot;t, expected: &quot;</span> + t_res[i].ToString() + <span class="hljs-string">&quot;, got: &quot;</span> + t.ToString());
                }
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">CMP</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> x, <span class="hljs-keyword">float</span> y</span>) </span>{
            <span class="hljs-keyword">return</span> System.Math.Abs(x - y) &lt; <span class="hljs-number">0.00001</span>f;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Render</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">base</span>.Render();
            DrawOrigin();

            GL.Enable(EnableCap.Lighting);
            scene.Render();
            GL.Disable(EnableCap.Lighting);

            <span class="hljs-keyword">foreach</span> (Ray r <span class="hljs-keyword">in</span> rays) {
                <span class="hljs-keyword">if</span> (scene.Raycast(r) != <span class="hljs-keyword">null</span>) {
                    GL.Color3(<span class="hljs-number">1</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">0</span>f);
                }
                <span class="hljs-keyword">else</span> {
                    GL.Color3(<span class="hljs-number">0</span>f, <span class="hljs-number">0</span>f, <span class="hljs-number">1</span>f);
                }
                r.Render();
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> deltaTime</span>) </span>{
            <span class="hljs-keyword">base</span>.Update(deltaTime);
            Vector3 cubeRotation = cubeNode.Rotation;
            cubeRotation.X += <span class="hljs-number">45.0</span>f * deltaTime;
            cubeNode.Rotation = cubeRotation;

            <span class="hljs-comment">/* NEW */</span> scene.Octree.Update(cubeNode);
        }
    }
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="octree.html" class="navigation navigation-prev " aria-label="Previous page: Octree">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="raycast.html" class="navigation navigation-next " aria-label="Next page: Raycast">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Octree-Node","level":"1.9.3.1","depth":3,"next":{"title":"Raycast","level":"1.9.3.2","depth":3,"path":"Chapter5/raycast.md","ref":"Chapter5/raycast.md","articles":[]},"previous":{"title":"Octree","level":"1.9.3","depth":2,"path":"Chapter5/octree.md","ref":"Chapter5/octree.md","articles":[{"title":"Octree-Node","level":"1.9.3.1","depth":3,"path":"Chapter5/dynamic_objects.md","ref":"Chapter5/dynamic_objects.md","articles":[]},{"title":"Raycast","level":"1.9.3.2","depth":3,"path":"Chapter5/raycast.md","ref":"Chapter5/raycast.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["mathjax","youtube"],"pluginsConfig":{"mathjax":{"forceSVG":false,"version":"2.6-latest"},"youtube":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"letter","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Chapter5/dynamic_objects.md","mtime":"2016-08-08T20:42:39.551Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-10-03T17:51:33.268Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

